<!doctype html><html class="not-ready lg:text-base" style=--bg:#fbfbfb lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Embed your single page app in Golang - Nel retrobottega</title>
<meta name=theme-color><meta name=description content="Image by Tim Zänkert
Continuum of this article.
Preface As mentioned in the previous version of this article, I love the idea of having a nice modern ui embedded in a single binary. It&rsquo;s clean, elegant and saves a lot of time when deploying the applcation.
This time i built a simple gallery viewe named Fuu.
Application Structure FS <&ndash;> Golang Fileserver <&ndash; Browsing API <&ndash;> React App
Fileserver exposes static resources (photos) Background process that generates thumbnails HTTP Methos to retrieve the directory structure React App for viewing photos grouped by directory Embed React App Golang http package exposes the http."><meta name=author content="Marco Piovanello"><link rel="preload stylesheet" as=style href=https://blog.nelretrobottega.xyz/main.min.css><link rel=preload as=image href=https://blog.nelretrobottega.xyz/theme.png><link rel=preload as=image href="https://cdn.v2ex.com/gravatar/6569200b6db25692e576f71d589ff97e?s=160&amp;d=identicon"><link rel=preload as=image href=https://blog.nelretrobottega.xyz/github.svg><link rel=preload as=image href=https://blog.nelretrobottega.xyz/rss.svg><script defer src=https://blog.nelretrobottega.xyz/highlight.min.js onload=hljs.initHighlightingOnLoad()></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css integrity=sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js integrity=sha384-G0zcxDFp5LWZtDuRMnBkk3EphCK1lhEf4UEyEM693ka574TZGwo4IWwS6QLzM/2t crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",()=>renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1}))</script><link rel=icon href=https://blog.nelretrobottega.xyz/favicon.ico><link rel=apple-touch-icon href=https://blog.nelretrobottega.xyz/apple-touch-icon.png><meta name=generator content="Hugo 0.121.2"><meta itemprop=name content="Embed your single page app in Golang"><meta itemprop=description content="A reworked approach to embed single page applications in Golang."><meta itemprop=datePublished content="2023-01-02T23:16:08+01:00"><meta itemprop=dateModified content="2023-01-02T23:16:08+01:00"><meta itemprop=wordCount content="453"><meta itemprop=keywords content="go,golang,react,embed,"><meta property="og:title" content="Embed your single page app in Golang"><meta property="og:description" content="A reworked approach to embed single page applications in Golang."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.nelretrobottega.xyz/posts/golang/serve-spa-reviwed/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-01-02T23:16:08+01:00"><meta property="article:modified_time" content="2023-01-02T23:16:08+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Embed your single page app in Golang"><meta name=twitter:description content="A reworked approach to embed single page applications in Golang."><link rel=canonical href=https://blog.nelretrobottega.xyz/posts/golang/serve-spa-reviwed/></head><body class="text-black duration-200 ease-out dark:text-white"><header class="mx-auto flex h-[4.5rem] max-w-3xl px-8 lg:justify-center"><div class="relative z-50 mr-auto flex items-center"><a class="-translate-x-[1px] -translate-y-[1px] text-2xl font-semibold" href=https://blog.nelretrobottega.xyz/>Nel retrobottega</a><div class="btn-dark text-[0] ml-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]" role=button aria-label=Dark></div></div><div class="btn-menu relative z-50 -mr-8 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden" role=button aria-label=Menu></div><script>const htmlClass=document.documentElement.classList;setTimeout(()=>{htmlClass.remove("not-ready")},10);const btnMenu=document.querySelector(".btn-menu");btnMenu.addEventListener("click",()=>{htmlClass.toggle("open")});const metaTheme=document.querySelector('meta[name="theme-color"]'),lightBg="#fbfbfb".replace(/"/g,""),setDark=e=>{metaTheme.setAttribute("content",e?"#000":lightBg),htmlClass[e?"add":"remove"]("dark"),localStorage.setItem("dark",e)},darkScheme=window.matchMedia("(prefers-color-scheme: dark)");if(htmlClass.contains("dark"))setDark(!0);else{const e=localStorage.getItem("dark");setDark(e?e==="true":darkScheme.matches)}darkScheme.addEventListener("change",e=>{setDark(e.matches)});const btnDark=document.querySelector(".btn-dark");btnDark.addEventListener("click",()=>{setDark(localStorage.getItem("dark")!=="true")})</script><div class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"><nav class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-6"><a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/about>About</a>
<a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/tags>Tags</a></nav><nav class="mt-12 flex justify-center space-x-10 dark:invert lg:ml-12 lg:mt-0 lg:items-center lg:space-x-6"><a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./github.svg) href=https://github.com/marcopeocchi target=_blank rel=me>github
</a><a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./rss.svg) href=https://blog.nelretrobottega.xyz/index.xml target=_blank rel=alternate>rss</a></nav></div></header><main class="prose prose-neutral relative mx-auto min-h-[calc(100%-9rem)] max-w-3xl px-8 pb-16 pt-12 dark:prose-invert"><article><header class=mb-16><h1 class="!my-0 pb-2.5">Embed your single page app in Golang</h1><div class="text-sm antialiased opacity-60"><time>Jan 2, 2023</time>
<span class=mx-1>&#183;</span>
<span>Marco Piovanello</span></div></header><section><p><em>Image by <a href=https://unsplash.com/it/@znkrt>Tim Zänkert</a></em></p><p><strong>Continuum of <a href=../serve-spa/>this article</a>.</strong></p><h2 id=preface>Preface</h2><p>As mentioned in the previous version of this article, I love the idea of having a nice
modern ui embedded in a single binary. It&rsquo;s clean, elegant and saves a lot of time when
deploying the applcation.</p><p>This time i built a simple gallery viewe named <code>Fuu</code>.</p><h2 id=application-structure>Application Structure</h2><p>FS &lt;&ndash;> Golang Fileserver &lt;&ndash; Browsing API &lt;&ndash;> React App</p><ul><li>Fileserver exposes static resources (photos)</li><li>Background process that generates thumbnails</li><li>HTTP Methos to retrieve the directory structure</li><li>React App for viewing photos grouped by directory</li></ul><h2 id=embed-react-app>Embed React App</h2><p>Golang http package exposes the <code>http.FileServer</code> method that takes a FS as parameter</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>//go:embed frontend/dist
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>app</span> <span style=color:#a6e22e>embed</span>.<span style=color:#a6e22e>FS</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// creates a hierarchical FS starting from the specified subfolder
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>appBuild</span>, <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>fs</span>.<span style=color:#a6e22e>Sub</span>(<span style=color:#f92672>*</span><span style=color:#a6e22e>app</span>, <span style=color:#e6db74>&#34;frontend/dist&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Serve a FS
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Handle</span>(<span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>FileServer</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>FS</span>(<span style=color:#a6e22e>appBuild</span>)))
</span></span></code></pre></div><p>This actually works pretty well!</p><p>But there is a catch: you <strong>must</strong> neither serve resources from the index route.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>//go:embed frontend/dist
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>app</span> <span style=color:#a6e22e>embed</span>.<span style=color:#a6e22e>FS</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// creates a hierarchical FS starting from the specified subfolder
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>appBuild</span>, <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>fs</span>.<span style=color:#a6e22e>Sub</span>(<span style=color:#f92672>*</span><span style=color:#a6e22e>app</span>, <span style=color:#e6db74>&#34;frontend/dist&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Serving a directory
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Handle</span>(<span style=color:#e6db74>&#34;/res/&#34;</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StripPrefix</span>(<span style=color:#e6db74>&#34;/res&#34;</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>FileServer</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Dir</span>(<span style=color:#e6db74>&#34;./res&#34;</span>))))
</span></span><span style=display:flex><span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Handle</span>(<span style=color:#e6db74>&#34;/app/&#34;</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StripPrefix</span>(<span style=color:#e6db74>&#34;/app&#34;</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>FileServer</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>FS</span>(<span style=color:#a6e22e>appBuild</span>))))
</span></span></code></pre></div><p>But i want to serve my react app from the index route and the static resources from the /static route. This is a job for a http middleware.</p><h2 id=a-job-for-a-http-middleware>A job for a HTTP middleware</h2><p>Essentially the middleware need&rsquo;s to:</p><ol><li>detect if we&rsquo;re asking for <code>index.html</code>, if so return the document</li><li>if we&rsquo;re asking for an asset open the embedded FS to the correct folder</li><li>apply the correct MIME</li><li>return the buffer and also might set a cache-control header</li></ol><h2 id=tldr>TLDR;</h2><p><code>react_handler.go</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>pkg</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>reactHandler</span>(<span style=color:#a6e22e>fs</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>fs</span>.<span style=color:#a6e22e>FS</span>) <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Handler</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>HandlerFunc</span>(<span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Method</span> <span style=color:#f92672>!=</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>MethodGet</span> {
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Error</span>(<span style=color:#a6e22e>w</span>,
</span></span><span style=display:flex><span>			  <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusText</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusMethodNotAllowed</span>), 
</span></span><span style=display:flex><span>			  <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusMethodNotAllowed</span>,
</span></span><span style=display:flex><span>			)
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>path</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>filepath</span>.<span style=color:#a6e22e>Clean</span>(<span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>URL</span>.<span style=color:#a6e22e>Path</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// Frontend routes must be known.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>// Add as many routes as frontend has.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>// The frontend router will take care of redirecting to the correct view/component
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>path</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;/&#34;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>HasPrefix</span>(<span style=color:#a6e22e>path</span>, <span style=color:#e6db74>&#34;/someroute&#34;</span>){
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>path</span> = <span style=color:#e6db74>&#34;index.html&#34;</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>path</span> = <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>TrimPrefix</span>(<span style=color:#a6e22e>path</span>, <span style=color:#e6db74>&#34;/&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>file</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> (<span style=color:#f92672>*</span><span style=color:#a6e22e>fs</span>).<span style=color:#a6e22e>Open</span>(<span style=color:#a6e22e>path</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>IsNotExist</span>(<span style=color:#a6e22e>err</span>) {
</span></span><span style=display:flex><span>				<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;file&#34;</span>, <span style=color:#a6e22e>path</span>, <span style=color:#e6db74>&#34;not found:&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>				<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>NotFound</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>r</span>)
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;file&#34;</span>, <span style=color:#a6e22e>path</span>, <span style=color:#e6db74>&#34;cannot be read:&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Error</span>(<span style=color:#a6e22e>w</span>,
</span></span><span style=display:flex><span>			  <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusText</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>), 
</span></span><span style=display:flex><span>				<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>,
</span></span><span style=display:flex><span>			)
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>contentType</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>mime</span>.<span style=color:#a6e22e>TypeByExtension</span>(<span style=color:#a6e22e>filepath</span>.<span style=color:#a6e22e>Ext</span>(<span style=color:#a6e22e>path</span>))
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Header</span>().<span style=color:#a6e22e>Set</span>(<span style=color:#e6db74>&#34;Content-Type&#34;</span>, <span style=color:#a6e22e>contentType</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>HasPrefix</span>(<span style=color:#a6e22e>path</span>, <span style=color:#e6db74>&#34;assets/&#34;</span>) {
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Header</span>().<span style=color:#a6e22e>Set</span>(<span style=color:#e6db74>&#34;Cache-Control&#34;</span>, <span style=color:#e6db74>&#34;public, max-age=2592000&#34;</span>)
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>stat</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>Stat</span>()
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>==</span> <span style=color:#66d9ef>nil</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>stat</span>.<span style=color:#a6e22e>Size</span>() &gt; <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Header</span>().<span style=color:#a6e22e>Set</span>(<span style=color:#e6db74>&#34;Content-Length&#34;</span>, <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34;%d&#34;</span>, <span style=color:#a6e22e>stat</span>.<span style=color:#a6e22e>Size</span>()))
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>Copy</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>file</span>)
</span></span><span style=display:flex><span>	})
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><code>server.go</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>//go:embed frontend/dist
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>app</span> <span style=color:#a6e22e>embed</span>.<span style=color:#a6e22e>FS</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// creates a hierarchical FS starting from the specified subfolder
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>appBuild</span>, <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>fs</span>.<span style=color:#a6e22e>Sub</span>(<span style=color:#f92672>*</span><span style=color:#a6e22e>app</span>, <span style=color:#e6db74>&#34;frontend/dist&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Serving the react app build
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Handle</span>(<span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#a6e22e>reactHandler</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>appBuild</span>))
</span></span><span style=display:flex><span><span style=color:#75715e>// Now i can serve a different folder while keeping the react app on &#34;/&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Handle</span>(<span style=color:#e6db74>&#34;/media/&#34;</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StripPrefix</span>(<span style=color:#e6db74>&#34;/media&#34;</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>FileServer</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Dir</span>(<span style=color:#e6db74>&#34;./media&#34;</span>))))
</span></span></code></pre></div><p>Happy Coding!</p><p>And happy new year!</p></section><footer class="mt-12 flex flex-wrap"><a class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]" href=https://blog.nelretrobottega.xyz/tags/go>go</a>
<a class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]" href=https://blog.nelretrobottega.xyz/tags/golang>golang</a>
<a class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]" href=https://blog.nelretrobottega.xyz/tags/react>react</a>
<a class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]" href=https://blog.nelretrobottega.xyz/tags/embed>embed</a></footer><nav class="mt-24 flex rounded-lg bg-black/[3%] text-lg dark:bg-white/[8%]"><a class="flex w-1/2 items-center rounded-l-md p-6 pr-3 font-semibold no-underline hover:bg-black/[2%] dark:hover:bg-white/[3%]" href=https://blog.nelretrobottega.xyz/posts/golang/thumbnail-generator/><span class=mr-1.5>←</span><span>Concurrent thumbnail generator</span></a>
<a class="ml-auto flex w-1/2 items-center justify-end rounded-r-md p-6 pl-3 font-semibold no-underline hover:bg-black/[2%] dark:hover:bg-white/[3%]" href=https://blog.nelretrobottega.xyz/posts/golang/serve-spa/><span>Embed your single page app in Gin</span><span class=ml-1.5>→</span></a></nav></article></main><footer class="opaco mx-auto flex h-[4.5rem] max-w-3xl items-center px-8 text-[0.9em] opacity-60"><div class=mr-auto>&copy; 2024
<a class=link href=https://blog.nelretrobottega.xyz/>Nel retrobottega</a></div><a class="link mx-6" href=https://gohugo.io/ rel=noopener target=_blank>Powered by Hugo️️</a>️
<a class=link href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>✎ Paper</a></footer></body></html>